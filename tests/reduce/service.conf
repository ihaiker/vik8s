namespace vik8s;
prefix vik8s.io;

pod mysql {
    container glusetfs "quay.io/ceph/ceph:v1.25.22" Always {
        mount secret:mysql-password:mysql-config /data:sub;
    }
}
service mysql {
    selector {
        vik8s.io/name mysql;
    }
    port rpc 1024:1024/TCP;
}

dep mysql2 {
    replicas 5;
    container glusetfs "quay.io/ceph/ceph:v1.25.22" Always {
        mount secret:mysql-password:mysql-config /data:sub;
    }
    service {
        port rpc 1024:1024/TCP;
    }
}

Ingress:networking.k8s.io/v1beta1 mysql {
    tls {
       secretName sec-config;
       hosts /name;
    }
    tls {
       secretName sec-config1;
       hosts /name1;
    }
    rules {
        host n1m2;
        http {
            paths {
                backend {
                    serviceName name;
                    servicePort 1;
                }
                backend {
                    serviceName name2;
                    servicePort 2;
                }
            }
        }
    }
}